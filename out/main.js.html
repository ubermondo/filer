<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: main.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: main.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// local javascript file - DO NOT CHANGE MAIN.MIN.JS. Instead, make changes here in main.js and compress into main.min.js.

/**
 * Gets information about an uploaded file, based on the filename.
 * @constructor
 * @param {string} fileName - The filename.
 */
var getFileInfo = function(fileName) {
  var fileUrl = "./demo/test.json"; //'http://localhost:8080/file/'+fileName in the actual server instance
  $.getJSON(fileUrl)
    .done(function(data) {
      console.log("Upload successful:");
      console.log(data);
      showFileInfo(data);
    })
    .fail(function(jqXHR, textStatus, error) {
      console.log("Upload failed - "+textStatus+", "+error+":");
      console.log(jqXHR);
    });
}

/**
 * Shows information about a retrieved file, based on the file's JSON.
 * @constructor
 * @param {object} fileInfo - The file information JSON.
 */
var showFileInfo = function(fileInfo) {
  if (fileInfo.hasOwnProperty("filename") &amp;&amp; fileInfo.hasOwnProperty("total") &amp;&amp; fileInfo.hasOwnProperty("words")) {
    if (!$("#fileInfo").length) {
      $("#tableHolder").html('&lt;table id="fileInfo" class="table table-sm table-striped">&lt;thead>&lt;tr>&lt;/tr>&lt;/thead>&lt;tbody>&lt;/tbody>&lt;/table>');
      $.each(["filename", "total", "words"], function(key, value) {
        $("#fileInfo thead tr").append('&lt;th scope="col">'+value+'&lt;/th>');
      });
    }
    $("#fileInfo tbody").append('&lt;tr>&lt;td>'+fileInfo.filename+'&lt;/td>&lt;td>'+fileInfo.total+'&lt;/td>&lt;td class="fileWords">&lt;/td>&lt;/tr>');
    var fileWords = [];
    $.each(fileInfo.words, function(key, value) {
      fileWords.push('"'+key+'" : '+value);
    });
    $("td.fileWords:last").html(fileWords.join(', '));
  }
}

$(function() {

  /**
   * When the "fileUpload" form is submitted, upload the specified file to the backend
   * and render the response.
   */
  $("#fileUpload").submit(function(e) {
    var formData;
    formData = new FormData();
    formData.append("file", $("#fileSelector")[0].files[0]);
    var fileName = $("#fileSelector")[0].value.split("\\").pop();
    $.ajax({
      //url : 'http://localhost:8080/file/'+fileName+'/', //assumes that RMS is running on localhost:8080; adjust this accordingly.
      url : './demo/test.json', //this is the URL of the simulated response
      data : formData,
      processData : false,
      type : 'GET', //type : 'PUT', //switch GET for PUT when interacting with the actual server
      contentType : 'multipart/form-data',
      dataType : 'json',
      jsonp : false,
      mimeType: 'multipart/form-data',
      xhrFields : {
        withCredentials : true
      }
    }).done(function(data) {
      console.log("Upload successful:");
      console.log(data);
      showFileInfo(data);
    })
    .fail(function(jqXHR, textStatus, error) {
      console.log("Upload failed - "+textStatus+", "+error+":");
      console.log(jqXHR);
    });
    e.preventDefault();
  });

});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="getFileInfo.html">getFileInfo</a></li><li><a href="showFileInfo.html">showFileInfo</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Fri Mar 09 2018 15:22:28 GMT-0500 (EST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
